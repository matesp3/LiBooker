@using LiBooker.Shared.DTOs.Admin
@implements IDisposable

<div class="user-search-wrapper">
    <div class="input-group">
        @* Added the "search-icon" class here *@
        <span class="input-group-text search-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
            </svg>
        </span>
        <input type="text"
               class="form-control search-input"
               placeholder="@this.Placeholder"
               @bind="this.SearchTerm"
               @bind:event="oninput"
               @onfocus="() => this.showSuggestions = true"
               @onblur="OnSearchBlur"
               aria-expanded="@(this.showSuggestions ? "true" : "false")"
               autocomplete="off"
               @onkeydown="HandleKeyDown" />
        @if (!string.IsNullOrEmpty(this.searchTerm))
        {
            <span class="clear-icon" @onclick="ClearSearch">✕</span>
        }
    </div>

    @if (this.showSuggestions)
    {
        <div class="suggestions-dropdown">
            @foreach (var user in this.suggestions)
            {
                <div class="suggestion-item" @onclick="() => SelectSuggestion(user)">
                    @Highlight(user.Email)
                </div>
            }
        </div>
    }
</div>